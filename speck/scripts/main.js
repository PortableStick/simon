!function(){"use strict";function s(){return{compMoves:[],playerMoves:[],isSounding:!1,playerHasMadeSelection:!1,playingTimers:[],isPlaying:!1,strictMode:!1,computerMovePlayTimer:1e3,soundingTimer:600,sounds:{"#0":new Audio("https://dl.dropboxusercontent.com/u/4223104/simongamesounds/sound1.mp3"),"#1":new Audio("https://dl.dropboxusercontent.com/u/4223104/simongamesounds/sound2.mp3"),"#2":new Audio("https://dl.dropboxusercontent.com/u/4223104/simongamesounds/sound3.mp3"),"#3":new Audio("https://dl.dropboxusercontent.com/u/4223104/simongamesounds/sound4.mp3"),error:new Audio("https://dl.dropboxusercontent.com/u/4223104/simongamesounds/error.mp3"),victory:new Audio("https://dl.dropboxusercontent.com/u/4223104/simongamesounds/victory.mp3")},init:function(){var s=this;$(".box").click(this.playerMakeSelection.bind(this)),$("#start").html("Start").click(this.startGame.bind(this)),$("#strictMode").change(function(){1==$(this).is(":checked")?(s.strictMode=!0,$(".feedback").html("Strict on")):(s.strictMode=!1,$(".feedback").html("Strict off"))})},resetTimers:function(){for(var s=0;s<this.playingTimers.length;s++)clearInterval(this.playingTimers[s]);this.playingTimers=[]},reset:function(){$(".box").removeClass("sounding"),this.playingTimers.length>0&&this.resetTimers(),this.compMoves=[],this.playerMoves=[],$(".feedback").html("Ready?"),$("#start").html("Start").off().click(this.startGame.bind(this))},startGame:function(){this.isPlaying=!0,this.newCompMove(),$(".feedback").html("Here we go!"),$("#start").html("Reset").off().click(this.reset.bind(this));var s=setTimeout(this.playCompMoves.bind(this),1800);this.playingTimers.push(s)},playerMakeSelection:function(s){if(!this.isSounding&&!this.playerHasMadeSelection&&this.isPlaying){var t=s.target.id;if(this.playerMoves.push(t),this.makeSound("#"+t),$(".feedback").html(this.playerMoves.length+"/"+this.compMoves.length),this.checkLastMove()===!0)if(this.strictMode===!1){this.playerHasMadeSelection=!0;var e=setTimeout(this.playCompMoves.bind(this),1500);this.playingTimers.push(e),$(".feedback").html("Try again!"),this.stopSounds(),this.sounds.error.play()}else this.strictMode===!0&&($(".feedback").html("Game over!"),setTimeout(this.reset.bind(this),3e3),this.stopSounds(),this.sounds.error.play());else if(this.playerMoves.length===this.compMoves.length){this.playerHasMadeSelection=!0,this.playerMoves=[],this.newCompMove(),this.computerMovePlayTimer=1e3-150*Math.floor(this.compMoves.length/5),this.soundingTimer=.6*this.computerMovePlayTimer;var e=setTimeout(this.playCompMoves.bind(this),1700);this.playingTimers.push(e)}}},playCompMoves:function(s){if(this.resetTimers(),21===this.compMoves.length)return $(".feedback").html("You win!!"),setTimeout(this.reset.bind(this),4e3),this.stopSounds(),void this.sounds.victory.play();var s=s||0,t=this.compMoves[s],e=this;if(this.isSounding=!0,this.playerMoves=[],s>=this.compMoves.length)return this.isSounding=!1,void(this.playerHasMadeSelection=!1);this.makeSound("#"+t),$(".feedback").html("Level "+this.compMoves.length);var i=setTimeout(function(){e.playCompMoves(s+1)},this.computerMovePlayTimer);this.playingTimers.push(i)},newCompMove:function(){var s=Math.floor(4*Math.random());this.compMoves.push(s)},makeSound:function(s){this.sounding=!0,$(s).addClass("sounding"),this.sounds[s].play();var t=setTimeout(function(){$(s).removeClass("sounding"),this.sounding=!1},600);this.playingTimers.push(t)},stopSounds:function(){for(sound in this.sounds)this.sounds[sound].pause(),this.sounds[sound].currentTime=0},checkLastMove:function(){var s=this.playerMoves.length-1;return this.compMoves[s]!=this.playerMoves[s]?!0:void 0}}}$(document).ready(function(){var t=s();t.init()})}();